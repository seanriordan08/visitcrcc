<%= render partial: "modals" %>

<div id="index-banner" class="parallax-container">
  <div class="section no-pad-bot">
    <div class="container">
      <br><br>
      <h1 class="header center crcc-black-text" style="font-family: 'Sansita One', cursive;">Castle Rock Community Church</h1>
      <div class="row center">
        <h5 class="header col s12 light crcc-brown-text"></h5>
      </div>
      <br><br>
      <div class="row center">
        <a href="#modal_learn_more" id="learn_more_button" class="btn-large waves-effect waves-light modal-trigger" style="background-color: #78B5CA">Learn More</a>
      </div>
    </div>
  </div>
  <div class="parallax">
    <%= image_tag("sun_mountain_light.jpg", alt: "Sunrise") %>
  </div>
</div>

<div class="section service_time_strip">
  <h3>Sunday Services</h3>
  <br>
  <span class="specifics">TBD:00 AM | TBD:00 AM</span>
  <br><br>
  <h3>Location</h3>
  <br>
  <span class="specifics">1234 Example Way, Castle Rock, CO 80108</span>
</div>

<div class="section">
  <div class="slider_box_wrapper">
    <div class="row">
      <div class="col s12 center">
        <div class="crcc_main_slider">
          <div class="slider_content dark_bg">New ministry initiative<br>Info session starts ...</div>
          <div class="slider_content light_bg">Community Picnic Event<br>Register your ...</div>
          <div class="slider_content dark_bg">City Serve Youth Mission<br>Signup ends Friday ...</div>
          <div class="slider_content light_bg">Authentic Faith Conference<br>Jan 6th ...</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="section">
    <!--   Icon Section   -->
    <div class="row">
      <div class="col s12 m3">
        <div class="icon-block hoverable">
          <h2 class="center brown-text"><i class="large material-icons">stars</i></h2>
          <h5 class="center">New Here?</h5>

          <p class="light">We encourage you to come as you are, nullam scelerisque id nunc nec volutpat. Etiam pellentesque tristique arcu, non consequat magna fermentum ac.</p>
        </div>
      </div>

      <div class="col s12 m3">
        <div class="icon-block hoverable">
          <h2 class="center brown-text"><i class="large material-icons">event</i></h2>
          <h5 class="center">Upcoming Events</h5>

          <p class="light">Stay tuned for our inaugural scelerisque id nunc nec volutpat. Etiam pellentesque tristique arcu, non consequat magna fermentum ac.</p>
        </div>
      </div>

      <div class="col s12 m3">
        <div class="icon-block hoverable">
          <h2 class="center brown-text"><i class="large material-icons">group</i></h2>
          <h5 class="center">Get involved</h5>

          <p class="light">Opportunities to demonstrate the heart of Christ are ullamcorper a sapien id, viverra ultrices eros. Morbi sem neque, posuere et pretium eget, bibendum sollicitudin lacus.</p>
        </div>
      </div>

      <div class="col s12 m3">
        <div class="icon-block hoverable">
          <h2 class="center brown-text"><i class="large material-icons">card_giftcard</i></h2>
          <h5 class="center">Give</h5>

          <p class="light">There are lots of ways to give, consequat magna fermentum ac. Cras ut ultricies eros. Maecenas eros justo, ullamcorper a sapien id</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section statement_of_faith">
  <div class="container">
    <h1 class="header center crcc-black-text">Statement of Faith</h1>
  </div>
  <br>
  <div class="container">
    <div class="row">
      <a href="#modal_faith_scriptures" class="statement_btn modal-trigger">
        <div class="col s6 m4"><div class="white_box hoverable"><div class="content">The Scriptures</div></div></div>
      </a>
      <a href="#modal_faith_trinity" class="statement_btn modal-trigger">
        <div class="col s6 m4"><div class="white_box hoverable"><div class="content">The Trinity</div></div></div>
      </a>
      <a href="#modal_faith_church" class="statement_btn modal-trigger">
        <div class="col s6 m4"><div class="white_box hoverable"><div class="content">The Church</div></div></div>
      </a>
      <a href="<%=statement_of_faith_welcome_index_path%>" class="statement_btn modal-trigger">
        <div class="col s6 m12"><div class="white_box hoverable" style="border-radius: 2px 2px 50px 50px"><div class="content">More...</div></div></div>
      </a>
    </div>
  </div>
</div>

<div class="container">
  <div class="section">
    <div class="row" style="margin: 0">
      <div class="col s4">
        <i class="medium material-icons brown-text" style="display: inline-block; vertical-align: middle">chat</i>
        <h4 style="display: inline-block; vertical-align: middle">Contact Us</h4>
      </div>
      <div class="col s7 offset-s1">
          <h5 style="color: #353535">We'd love to hear from you! Let us know your thoughts as we gear up for launch this Summer!</h5>
      </div>
    </div>
  </div>
</div>

<div class="parallax-container mission_statement" style="position: relative; height: auto">
  <div class="section">
    <div class="row">
      <div class="container">
        <div class="row">
          <div class="col s12">
            <h1 class="title center-align" style="text-shadow: 0 0 2px #353535">Our Mission</h1>
          </div>
        </div>
        <div class="row">
          <div class="col hide-on-small-only m2 l2">
            <i class="material-icons crcc-black-text flip" style="font-size: 9em">format_quote</i>
          </div>
          <div class="col s12 m10 l10">
            <div class="crcc-black-text text-lighten-4">
              <h3 style="position: relative; top: 35px; text-shadow: 0 0 10px #aaa, 0 0 1px #fff">
                Making Much Of Jesus - The clear objective to fight for our community in the name of Jesus Christ.
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br>
    <div class="row center">
      <div class="col s12">
        <%= image_tag "facebook.svg", size: "50x50", class: "social social_square" %>
        <%= image_tag "twitter.svg", size: "50x50", class: "social social_circle" %>
        <%= image_tag "instagram.svg", size: "50x50", class: "social social_square" %>
        <%= image_tag "pinterest.svg", size: "50x50", class: "social social_circle" %>
      </div>
    </div>
  </div>
  <div class="parallax"><%= image_tag("mountain_geometric.jpg", alt: "Mountain") %></div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $('.crcc_main_slider').slick({
      autoplay: true,
      autoplaySpeed: 2500,
      dots: true,
      infinite: true,
      speed: 300,
      slidesToShow: 1,
      fade: true,
      cssEase: 'linear',
      pauseOnHover: true
    });

    $('.statement_btn').on("click", function(){
      var id = $(this).attr("href").substring(1);
      var examine_text = ($('#'+id+ " p:first").contents().text());

      $('#'+id+" .modal-content h4").append("<div class='progress'><div class='indeterminate'></div></div>"); //Begin preloader

      get_scripture_links(id, examine_text);
    });

    function get_scripture_links(id, examine_text){
      $.ajax({
        method: 'get',
        url: 'https://api.biblia.com/v1/bible/tag',
        data: {text: examine_text, key: "<%= j(@biblia_key) %>"},
        dataType: 'html'
      })
      .done(function( msg ) {
        var response = jQuery.parseJSON(msg).text;
        $('#'+id+ " p:first").html(response);

        get_verse_from_link(id);
      });
    }

    function get_verse_from_link(id){
      var link_content = $('#'+id+ " p:first a");
      var link_count = link_content.length;

      link_content.each(function(index){
        var link = $(this);
        const verse = link.attr("href").match(/[^\/]*$/).toString();
        $.ajax({
          method: 'get',
          url: 'https://api.biblia.com/v1/bible/content/LEB.txt',
          data: {passage: verse, key: "<%= j(@biblia_key) %>"},
          dataType: 'text'
        })
        .done(function( msg ) {
          link.addClass("tooltipped").attr({
            "data-position": "bottom",
            "data-tooltip": "\"" + msg + "\" (LEB)"
          });
          $('.tooltipped').tooltip({delay: 50});

          if (link_count < 2){
            $("div.progress").empty(); //End preloader
          }
          link_count -= 1;
        });
      });
    }
  });
</script>